{% comment %}
  Library: Swiper JS
  Usage: Main Hero Slider
  Styling: Tailwind CSS
{% endcomment %}

<!-- Load Assets -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>

<style>
  /* Specific Swiper Override for pagination color */
  .swiper-pagination-bullet-active { background: {{ section.settings.btn_color }} !important; }
</style>

<div class="swiper hero-swiper-{{ section.id }} w-full relative group" style="background-color: #fcfbf9;">
  <div class="swiper-wrapper">
    {% for block in section.blocks %}
      <div class="swiper-slide flex items-center justify-center" style="background-color: {{ block.settings.bg_color }}; height: {{ section.settings.height_mobile }}px;">
        <!-- Desktop Height override via style tag due to liquid logic -->
        <style>
          @media(min-width: 768px) {
            .hero-swiper-{{ section.id }} .swiper-slide { height: {{ section.settings.height_desktop }}px !important; }
          }
        </style>
        
        <div class="relative z-10 max-w-7xl mx-auto h-full flex flex-col md:flex-row items-center justify-between px-6 w-full">
          <!-- Text Content -->
          <div class="w-full md:w-1/2 text-center md:text-left space-y-4">
            {% if block.settings.heading != blank %}
              <h2 class="font-serif font-bold text-3xl md:text-5xl tracking-widest" style="color: {{ section.settings.text_color }}; font-family: 'Times New Roman', serif;">
                {{ block.settings.heading }}
              </h2>
            {% endif %}
            
            {% if block.settings.subtitle != blank %}
              <p class="text-lg md:text-xl italic text-gray-600 font-serif">
                {{ block.settings.subtitle }}
              </p>
            {% endif %}
            
            {% if block.settings.discount != blank %}
              <div class="text-5xl md:text-6xl font-black text-gray-900 my-4">
                {{ block.settings.discount }}
              </div>
            {% endif %}
            
            {% if block.settings.btn_label != blank %}
              <a href="{{ block.settings.btn_link }}" 
                 class="inline-block px-8 py-3 text-white font-bold uppercase tracking-wider text-sm transition-colors duration-300 hover:bg-black mt-4"
                 style="background-color: {{ section.settings.btn_color }};">
                {{ block.settings.btn_label }}
              </a>
            {% endif %}
          </div>
          
          <!-- Image Content -->
          <div class="hidden md:flex w-1/2 justify-center h-full items-center p-8">
            {% if block.settings.image != blank %}
              {{ block.settings.image | image_url: width: 800 | image_tag: class: 'max-h-[80%] w-auto object-contain drop-shadow-xl', loading: 'eager' }}
            {% endif %}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  
  <div class="swiper-pagination"></div>
  <div class="swiper-button-prev !text-[#2f4f2f] after:!text-2xl md:after:!text-4xl"></div>
  <div class="swiper-button-next !text-[#2f4f2f] after:!text-2xl md:after:!text-4xl"></div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    new Swiper('.hero-swiper-{{ section.id }}', {
      loop: true,
      effect: 'fade',
      autoplay: {
        delay: {{ section.settings.autoplay_speed }}000,
        disableOnInteraction: false,
      },
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    });
  });
</script>

{% schema %}
{
  "name": "Hero Slider (Swiper)",
  "settings": [
    { "type": "header", "content": "Layout" },
    { "type": "range", "id": "height_desktop", "min": 400, "max": 800, "step": 10, "unit": "px", "label": "Desktop Height", "default": 500 },
    { "type": "range", "id": "height_mobile", "min": 300, "max": 600, "step": 10, "unit": "px", "label": "Mobile Height", "default": 400 },
    { "type": "range", "id": "autoplay_speed", "min": 3, "max": 10, "step": 1, "unit": "s", "label": "Autoplay Speed", "default": 5 },
    { "type": "color", "id": "text_color", "label": "Text Color", "default": "#2f4f2f" },
    { "type": "color", "id": "btn_color", "label": "Button Color", "default": "#8b5a2b" }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        { "type": "color", "id": "bg_color", "label": "Background Color", "default": "#e8f5e9" },
        { "type": "image_picker", "id": "image", "label": "Product Image" },
        { "type": "text", "id": "heading", "label": "Heading", "default": "SHEA TERRA BUNDLES" },
        { "type": "text", "id": "subtitle", "label": "Subtitle", "default": "Buy your favorite products together" },
        { "type": "text", "id": "discount", "label": "Discount/Highlight", "default": "10% OFF" },
        { "type": "text", "id": "btn_label", "label": "Button Label", "default": "Shop Now" },
        { "type": "url", "id": "btn_link", "label": "Button Link" }
      ]
    }
  ],
  "presets": [{ "name": "Hero Slider (Swiper)", "blocks": [{ "type": "slide" }, { "type": "slide" }] }]
}
{% endschema %}